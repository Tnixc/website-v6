<!doctype html><html lang=en><meta charset=UTF-8><meta content="width=device-width,initial-scale=1.0" name=viewport><link href=/output.css rel=stylesheet><link href=/syntax.css rel=stylesheet><link href=/favicon.png rel=icon type=image/png><meta content=website property=og:type><meta content=tnixc.space property=og:title><meta content="Tnixc's very own website" property=og:description><meta content=https://tnixc.space property=og:url><meta content="https://dyn-og.vercel.app/api/og?title=Simple - Building a component-based static site assembler" property=og:image><meta content=1200 property=og:image:width><meta content=630 property=og:image:height><meta content=summary_large_image name=twitter:card><meta content=tnixc.space name=twitter:title><meta content="Tnixc's very own website" name=twitter:description><meta content="https://dyn-og.vercel.app/api/og?title=Simple - Building a component-based static site assembler" name=twitter:image><meta content=1200 name=twitter:image:width><meta content=630 name=twitter:image:height><meta content="tnixc.space - Simple - Building a component-based static site assembler" name=description><title>[Simple - Building a component-based static site assembler]</title><script data-website-id=d41f775b-3a39-4ed9-b68a-5afe73974f01 defer src=https://cloud.umami.is/script.js></script><body class="flex flex-col justify-center p-2 lg:flex-row lg:pt-64 bg-neutral-200 selection:bg-stone-400/60"><div class="flex flex-col gap-8 p-6 font-mono h-fit min-w-36"><style>#small-logo {
    clip-path: polygon(
      100% 0,
      100% 100%,
      calc(0% + 12px) 100%,
      0 calc(100% - 12px),
      0 0
    );
  }
  #small-logo p {
    background: linear-gradient(
      to left,
      #ef4444e0 20%,
      #ef4444a0 20%,
      #ef4444a0 40%,
      #ef444470 40%,
      #ef444470 60%,
      #ef444440 60%,
      #ef444440 60%,
      #ef444440 80%,
      #ef444410 80%
    );
    filter: saturate(0.6);
  }</style><div class="w-36 h-auto bg-amber-500 bg-yellow-600/50 h-12 w-40 flex items-center group" id=small-logo><div class="grid place-items-center w-12 h-12"><div class="relative z-40 w-6 h-6 rounded-full border-4 border-yellow-600 bg-neutral-200"></div></div><div class="block h-12 w-[1px] bg-amber-800/50"></div><div class="block h-12 w-[2px]"></div><div class="block h-12 w-[1px] bg-amber-800/50"></div><p class="text-2xl px-1 text-amber-950/80 mr-2 ml-auto shadow-[0_0_0_2px_#ef4444] select-none group-hover:animate-pulse">TNIXC</div><div class="flex flex-col gap-5 pl-2"><a class="hover:underline underline-offset-[6px] w-fit decoration-2" href=/index.html>about me</a><a class="hover:underline underline-offset-[6px] w-fit decoration-2" href=/projects.html>projects</a><a class="hover:underline underline-offset-[6px] w-fit decoration-2" href=/writing.html>writing</a><a class="hover:underline underline-offset-[6px] w-fit decoration-2" href=/random.html>random</a></div></div><main class="p-6 w-full md:max-w-screen-md inv"><a class="block py-4 font-mono hover:underline w-fit underline-offset-[6px] decoration-2" href=/writing.html>[&LTback]</a><h1 class="text-3xl font-grotesk">Simple - Building a component-based static site assembler</h1><p class="pt-1 text-neutral-500">Published 18/07/2024<p class=pt-3>I should have just used Astro. Also SPAs are faster.<div class=py-8><hr class="border-[1.5px] border-neutral-400/50"></div><article class="prose pb-16"><p>I have an unhealthy addiction to redoing my personal website every few months (I have an article the history of this site <a href=https://tnixc.space/content/site_history.html>here</a>). As of v6, I've already tried Vue(and Nuxt), Svelte(kit), as well as Astro, and I was getting pretty tired of those.<p>So obviously, I decided to write my own component-based html assembler in rust, and I'm calling it <strong>simple</strong> because it is. It was quite daunting at first, but now that it's somewhat functional it seemed pretty easy, although some compromises were made. It's pretty damn slow right now, hopefully I can fix that.<h1>Features</h1><ul><li>Components, with props and slots.<li>Templating engine<li><code>&LTmarkdown></code> component for rendering markdown.</ul><h1>Todo</h1><p>This is a project that I do want to keep working on, and I want to make it proper. Here's some goals for this project that I still want to implement:<ul><li><input disabled type=checkbox> Fix bugs (extremely buggy right now).<li><input disabled type=checkbox> Include formatting and minify-ing support.<li><input disabled type=checkbox> Fix problem where there are 2 sources of truth for md in the current way I do blog posts, will hopefully be fixed with proper md rendering.<li><input disabled type=checkbox> Actually good logs with color, status, etc.<li><input disabled type=checkbox> Keep some elements loaded to avoid reading from disk every time.<li><input disabled type=checkbox> Switch to using a .config file<li><input disabled type=checkbox> Proper escaping from <code>{}, ""</code>, etc.<li><input checked disabled type=checkbox> Check for circular deps.<li><input disabled type=checkbox> Implement MD rendering (external lib) from .md files. Not needed tho maybe?<li><input disabled type=checkbox> Look into testing (tons of edge cases)<li><input disabled type=checkbox> OG Image and meta generation, especially for markdown posts<li><input disabled type=checkbox> Give warnings for unused and not found components<li><input disabled type=checkbox> CSS scoping in components but waiting for <a href=https://developer.mozilla.org/en-US/docs/Web/CSS/@scope>@scope general support</a> , so just use tailwind for now<li><input disabled type=checkbox> Type safety-ish warnings when template doesn't match data<li><input disabled type=checkbox> Cache what has changed with hashing so no need to rebuild if stuff is same. -> can massively speed it up if lots of templating.<li><input disabled type=checkbox> Improve flexibility w/ markdown syntax highlighting<li><input disabled type=checkbox> Watcher or HMR (HMR is too complex so probably not) -> livejs is not ideal and is quite broken rn.<li><input checked disabled type=checkbox> <code>&LTmarkdown></code> component<li><input checked disabled type=checkbox> Commands such as <code>dev</code>, <code>build</code>, <code>new</code>.<li><input checked disabled type=checkbox> Props and slots<li><input checked disabled type=checkbox> The error handling is abysmal. Mainly due to me using unwrap(), Result type and ? everywhere. - more work to be done but it's in an ok state for now<li><input checked disabled type=checkbox> Make it so it ignores commented out lines.<li><input checked disabled type=checkbox> Speed tests.<li><input checked disabled type=checkbox> Get templates working<li><input checked disabled type=checkbox> Get components working<li><input checked disabled type=checkbox> Copy files from /public to /dist</ul><p>In reality, it's just a lot of regexing and string manipulation. I've got the easy parts down, now it's up to me to keep going and implement the harder stuff. I've only spent around ~10 hours seriously working on this, and it's around 600 lines of rust at the moment.<hr><h1>Syntax</h1><p>The file tree should look something like this:<pre class=syntax-highlighting><code class=language-rust><span class="source rust">example
└── src
    ├── components
    │  ├── Component.html
    │  └── Folder
    │     └── Component.html
    ├── data
    │  └── Something.json
    ├── pages
    │  ├── folder
    │  │  └── page.html
    │  └── index.html
    ├── public
    │  ├── image.png
    │  ├── folder
    │  │  └── image2.png
    └── templates
        └── Something.html
</span></code></pre><h3>Components</h3><p>Components, and folders in /components must be in <code>PascalCase</code>. The first letter must be capitalized.<p>To use a component:<pre class=syntax-highlighting><code class=language-html><span class="text html basic"><span class="meta tag other html"><span class="punctuation definition tag begin html"><</span><span class="entity name tag other html">Component</span><span class="punctuation definition tag end html"> /></span></span>
</span></code></pre><p>It searches from /components, so if a component is in a subfolder do this:<pre class=syntax-highlighting><code class=language-html><span class="text html basic"><span class="meta tag other html"><span class="punctuation definition tag begin html"><</span><span class="entity name tag other html">Folder:Component</span><span class="punctuation definition tag end html"> /></span></span>
</span></code></pre><p>so don't use <code>:</code> in your component or folder names.<h3>Templates</h3><p>The templates are stored in /templates, and the data for the corresponding template is in /data.<p>A data file should have the same name as the template file. Keep in mind the template file is the one that's being repeated.<p>To use:<pre class=syntax-highlighting><code class=language-html><span class="text html basic">&LT-{Template} />
</span></code></pre><p>And in templates/Template.html and data/Template.json,<pre class=syntax-highlighting><code class=language-html><span class="text html basic"><span class="meta tag block any html"><span class="punctuation definition tag begin html"><</span><span class="entity name tag block any html">p</span><span class="punctuation definition tag end html">></span></span>${something}<span class="meta tag block any html"><span class="punctuation definition tag begin html">&LT/</span><span class="entity name tag block any html">p</span><span class="punctuation definition tag end html">></span></span>
</span></code></pre><p>Will match<pre class=syntax-highlighting><code class=language-json><span class="source json"><span class="meta structure array json"><span class="punctuation section array begin json">[</span><span class="meta structure dictionary json"><span class="punctuation section dictionary begin json">{</span> <span class="meta structure dictionary key json"><span class="string quoted double json"><span class="punctuation definition string begin json">"</span>something<span class="punctuation definition string end json">"</span></span></span><span class="meta structure dictionary value json"><span class="punctuation separator dictionary key-value json">:</span> <span class="string quoted double json"><span class="punctuation definition string begin json">"</span>a<span class="punctuation definition string end json">"</span></span> </span><span class="punctuation section dictionary end json">}</span></span><span class="punctuation separator array json">,</span> <span class="meta structure dictionary json"><span class="punctuation section dictionary begin json">{</span> <span class="meta structure dictionary key json"><span class="string quoted double json"><span class="punctuation definition string begin json">"</span>something<span class="punctuation definition string end json">"</span></span></span><span class="meta structure dictionary value json"><span class="punctuation separator dictionary key-value json">:</span> <span class="string quoted double json"><span class="punctuation definition string begin json">"</span>b<span class="punctuation definition string end json">"</span></span> </span><span class="punctuation section dictionary end json">}</span></span><span class="punctuation section array end json">]</span></span>
</span></code></pre><p>You can use components in templates and vice versa. It recursively resolves each one so if a lot of places use a component it could become inefficient because it reads from disk every time. It also doesn't halt on circular dependencies (yet!).<p>It also works with tailwind:<pre class=syntax-highlighting><code class=language-sh><span class="source shell bash"><span class="meta function-call shell"><span class="variable function shell">bunx</span></span><span class="meta function-call arguments shell"> tailwindcss<span class="variable parameter option shell"><span class="punctuation definition parameter shell"> -</span>i</span> ./src/public/input.css<span class="variable parameter option shell"><span class="punctuation definition parameter shell"> -</span>o</span> ./src/public/output.css<span class="variable parameter option shell"><span class="punctuation definition parameter shell"> --</span>watch</span></span>
</span></code></pre><hr><p>I tried to build it with minimal dependencies.<ol><li><code>comrak</code> → markdown parser.<li><code>fancy-regex</code> → Regex for negative lookbehind/lookahead for comments.<li><code>notify</code> → File watcher to rebuild during <code>simple dev</code>.<li><code>rouille</code> → Web server to serve <code>dist</code> during <code>simple dev</code>.<li><code>serde_json</code> → JSON deserialization for data.json parsing.</ol><p>After all, it's too simple to warrant a large number of dependencies.<hr><p>Of course there's no reactivity, though I would like to build my own framework with reactivity someday. That's why I called this an "assembler" and not a "framework". Not much logic here. It also feels surprisingly fast in dev when I save and see the changes, but I haven't tested it with a lot of components yet. And actually, SPAs feel faster than sites like these, and if you want something actually good for templating, you should use tera and extend it.<blockquote><p>You can view the source code <a href=https://github.com/Tnixc/simple>here</a>(it's really bad). This article is super outdated now, check out the readme on the github for updates!</blockquote></article><div class=min-h-96><script data-category="Blog Posts" data-term="Simple - Building a component-based static site assembler" async crossorigin data-category-id=DIC_kwDOMX_hYM4Cie6Y data-emit-metadata=0 data-input-position=top data-lang=en data-loading=lazy data-mapping=specific data-reactions-enabled=1 data-repo=Tnixc/website-v6 data-repo-id=R_kgDOMX_hYA data-strict=0 data-theme=light src=https://giscus.app/client.js></script></div><div class="flex flex-col gap-4 justify-between p-2 my-6 font-mono text-sm sm:my-20 bg-neutral-400/10"><hr class="border-[1.5px] border-neutral-400/30"><div class="flex flex-col gap-3 justify-between md:flex-row"><a class="flex whitespace-nowrap hover:underline underline-offset-[6px] decoration-2 w-fit bg-neutral-400/20" href=https://github.com/Tnixc target=_blank>[github]<svg class="w-4 h-4" viewbox="0 0 24 24" height=32 width=32 xmlns=http://www.w3.org/2000/svg><path d="M6 7c0 .55.45 1 1 1h7.59l-8.88 8.88a.996.996 0 1 0 1.41 1.41L16 9.41V17c0 .55.45 1 1 1s1-.45 1-1V7c0-.55-.45-1-1-1H7c-.55 0-1 .45-1 1" fill=currentColor /></svg> </a><a class="flex whitespace-nowrap hover:underline underline-offset-[6px] decoration-2 w-fit bg-neutral-400/20" href=https://x.com/_Tnixc target=_blank>[twitter]<svg class="w-4 h-4" viewbox="0 0 24 24" height=32 width=32 xmlns=http://www.w3.org/2000/svg><path d="M6 7c0 .55.45 1 1 1h7.59l-8.88 8.88a.996.996 0 1 0 1.41 1.41L16 9.41V17c0 .55.45 1 1 1s1-.45 1-1V7c0-.55-.45-1-1-1H7c-.55 0-1 .45-1 1" fill=currentColor /></svg> </a><span class="whitespace-nowrap bg-neutral-400/20 w-fit">discord: @Tnixc</span><span class="whitespace-nowrap bg-neutral-400/20 w-fit">tnixxc@gmail.com</span></div><hr class="border-[1.5px] border-neutral-400/30"><div class="flex flex-col gap-4 justify-end text-neutral-700 w-fit"><a class="flex whitespace-nowrap hover:underline underline-offset-[6px] decoration-2 w-fit" href=/content/about.html>[about this site]</a><a class="flex whitespace-nowrap hover:underline underline-offset-[6px] decoration-2 w-fit" href=https://github.com/Tnixc/website-v6 target=_blank>[source code]<svg class="w-4 h-4" viewbox="0 0 24 24" height=32 width=32 xmlns=http://www.w3.org/2000/svg><path d="M6 7c0 .55.45 1 1 1h7.59l-8.88 8.88a.996.996 0 1 0 1.41 1.41L16 9.41V17c0 .55.45 1 1 1s1-.45 1-1V7c0-.55-.45-1-1-1H7c-.55 0-1 .45-1 1" fill=currentColor /></svg> </a></div><div class="flex gap-4 justify-end w-full text-neutral-700"><a class="grid place-items-center font-sans whitespace-nowrap hover:underline underline-offset-[6px] decoration-2 aspect-square" href=https://ctp-webr.ing/tnixc/previous>&LT-</a><a class="grid content-center place-items-center text-center hover:underline underline-offset-[6px] decoration-2" href=https://ctp-webr.ing/>catppuccin webring</a><a class="grid place-items-center font-sans whitespace-nowrap hover:underline underline-offset-[6px] decoration-2 aspect-square" href=https://ctp-webr.ing/tnixc/next>-></a></div></div></main><div class="w-full max-w-0 transition-all duration-500 xl:max-w-44"></div>